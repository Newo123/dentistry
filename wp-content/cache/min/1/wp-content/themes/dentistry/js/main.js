document.addEventListener("DOMContentLoaded",()=>{Fancybox.bind("[data-fancybox]",{});const elements=document.querySelectorAll("[data-imask]");const maskOptions={mask:"+{7} (000) 000-00-00",};elements.forEach((element)=>{const phoneMask=IMask(element,maskOptions);element.phoneMask=phoneMask});function modal(){let btnOpenModal=document.querySelectorAll("*[data-modal-open]");const btnCloseModal=document.querySelectorAll("*[data-modal-close]");const btnBlockModal=document.querySelectorAll("*[data-modal-block]");btnOpenModal.forEach((btn)=>{btn.addEventListener("click",toggleModalClass)});btnCloseModal.forEach((btn)=>{btn.addEventListener("click",toggleModalClass)});document.addEventListener("click",(e)=>{const modal=e.target.classList.contains("modal-wrapper")?e.target:null;if(modal){modal?.classList.remove("active")}});function toggleModalClass(){btnBlockModal.forEach((block)=>{if(this.dataset.modalOpen===block.dataset.modalBlock||this.dataset.modalClose===block.dataset.modalBlock){block.classList.toggle("active");this.classList.toggle("active")}})}}
modal();document.addEventListener("scroll",()=>{const header=document.querySelector("header");header.classList.toggle("scroll",window.scrollY>10)});function toggleClass(){document.addEventListener("click",(e)=>{const wrapper=e.target.closest("*[data-toggle-class-wrapper]");const items=wrapper?.querySelectorAll("*[data-toggle-class-item]");if(wrapper&&items){items.forEach((item)=>item.classList.toggle("active"))}})}
toggleClass();const initTabs=()=>{const tabsContainer=document.querySelector("*[data-tabs]");if(!tabsContainer)return;const buttons=tabsContainer.querySelectorAll("*[data-tab-btn]");const panes=tabsContainer.querySelectorAll("*[data-tab-pane]");buttons.forEach((btn)=>{btn.addEventListener("click",()=>{const targetId=btn.dataset.target;buttons.forEach((b)=>b.classList.remove("is-active"));btn.classList.add("is-active");panes.forEach((pane)=>{pane.classList.toggle("is-active",pane.id===targetId)})})})};initTabs();const swiperAllNeed=new Swiper(".sec-all-need__slider .swiper",{slidesPerView:1,spaceBetween:20,navigation:{nextEl:".sec-all-need__slider-nav .slider-button-next",prevEl:".sec-all-need__slider-nav .slider-button-prev",},});const sliderWrappers=document.querySelectorAll(".sec-services__item-slider",);sliderWrappers.forEach((wrapper)=>{const swiperContainer=wrapper.querySelector(".swiper");new Swiper(swiperContainer,{slidesPerView:1,spaceBetween:20,navigation:{nextEl:wrapper.querySelector(".slider-button-next"),prevEl:wrapper.querySelector(".slider-button-prev"),},pagination:{el:wrapper.querySelector(".swiper-pagination"),clickable:!0,},observer:!0,observeParents:!0,observeSlideChildren:!0,})});const swiperPortfolio=new Swiper(".sec-portfolio__slider .swiper",{initialSlide:1,centeredSlides:!0,navigation:{nextEl:".sec-portfolio__slider .slider-button-next",prevEl:".sec-portfolio__slider .slider-button-prev",},pagination:{el:".sec-portfolio__slider .swiper-pagination",clickable:!0,},breakpoints:{0:{slidesPerView:1,spaceBetween:-50,},1024:{slidesPerView:3,spaceBetween:-30,},},});const swiperVideos=new Swiper(".sec-videos__slider .swiper",{spaceBetween:30,navigation:{nextEl:".sec-videos__slider .slider-button-next",prevEl:".sec-videos__slider .slider-button-prev",},pagination:{el:".sec-videos__slider .swiper-pagination",clickable:!0,},breakpoints:{0:{slidesPerView:1,},1024:{slidesPerView:2,},},});const initAccordion=()=>{const accordion=document.querySelector("[data-accordion]");if(!accordion)return;const items=accordion.querySelectorAll("[data-accordion-item]");items.forEach((item)=>{const control=item.querySelector("[data-accordion-control]");control.addEventListener("click",()=>{const isOpen=item.classList.contains("is-open");items.forEach((i)=>i.classList.remove("is-active","is-open"));if(!isOpen){item.classList.add("is-open")}})})};initAccordion();function checkForm(){function validateForm(e){e.preventDefault();const phoneInput=e.target.querySelector("*[data-form-phone]");const nameInput=e.target.querySelector("*[data-form-name]");const checkboxInput=e.target.querySelector("*[data-form-checkbox]");const modalFormSuccess=document.querySelector(".modal-form-success");const allModals=document.querySelectorAll(".modal-wrapper");let isValid=!0;if(nameInput.value.trim()===""){nameInput.classList.add("is-error");isValid=!1}else{nameInput.classList.remove("is-error")}
if(phoneInput.value.length<17){phoneInput.classList.add("is-error");isValid=!1}else{phoneInput.classList.remove("is-error")}
if(!checkboxInput.checked){checkboxInput.classList.add("is-error");isValid=!1}else{checkboxInput.classList.remove("is-error")}
if(isValid){console.log("Форма валидна, отправляем данные...");allModals.forEach((modal)=>modal.classList.remove("active"));modalFormSuccess.classList.add("active");e.target.reset()}}
const forms=document.querySelectorAll("*[data-form]");forms.forEach((form)=>{const phoneInput=form.querySelector("*[data-form-phone]");const nameInput=form.querySelector("*[data-form-name]");form.addEventListener("submit",validateForm);[(phoneInput,nameInput)].forEach((input)=>{input.addEventListener("input",()=>{input.classList.remove("is-error")})})})}
checkForm()})